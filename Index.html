<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genesys Cloud New UI Navigation Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

    <div class="w-full max-w-2xl h-full sm:h-auto sm:max-h-[700px] flex flex-col bg-white shadow-2xl rounded-lg overflow-hidden">
        <!-- Header -->
        <header class="bg-gray-800 text-white p-4 sm:p-5 flex items-center shadow-md z-10">
            <div class="bg-white/20 p-2 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
            </div>
            <div class="ml-4">
                <h1 class="text-xl font-bold">Genesys Cloud New UI Navigation Assistant</h1>
                <p class="text-sm text-gray-300">Ask me where to find menu items!</p>
            </div>
        </header>

        <!-- Chat Window -->
        <div id="chat-window" class="flex-1 p-6 overflow-y-auto bg-gray-50">
            <!-- Bot Welcome Message -->
            <div class="flex justify-start mb-4">
                <div class="bg-gray-200 text-gray-800 p-3 rounded-lg max-w-xs lg:max-w-md shadow">
                    <p class="text-sm">Hello! I can help you find where features are located in the new UI. Just ask me a question like "Where is the Task List?" or "How do I find Intraday Monitoring?".</p>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div id="typing-indicator" class="p-6 pt-0 hidden">
             <div class="flex justify-start">
                <div class="bg-gray-200 text-gray-500 p-3 rounded-lg max-w-xs lg:max-w-md shadow flex items-center space-x-2">
                    <span class="text-sm">Typing</span>
                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.4s;"></div>
                </div>
            </div>
        </div>


        <!-- Input Area -->
        <footer class="bg-white p-4 border-t border-gray-200">
            <div class="flex items-center">
                <input type="text" id="user-input" placeholder="Type your question here..." class="flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                <button id="send-btn" class="ml-3 bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-300 shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                </button>
            </div>
        </footer>
    </div>

    <script>
        // --- CHATBOT KNOWLEDGE BASE ---
        // This data is extracted from the user's uploaded document, with additional keywords for better matching.
        const navigationData = [
            { category: 'Activity', level2: null, level3: null, legacy: 'Activity menu', keywords: ['activity'] },
            { category: 'Workspace', level2: 'Agent Workspace', level3: null, legacy: 'Interactions panel', keywords: ['workspace', 'agent workspace', 'interactions'] },
            { category: 'Workspace', level2: 'Task List', level3: null, legacy: 'Interactions panel', keywords: ['task list', 'tasks'] },
            { category: 'Workspace', level2: 'Parked Conversations', level3: null, legacy: 'Interactions panel', keywords: ['parked conversations'] },
            { category: 'Performance Management', level2: 'Intraday Management', level3: null, legacy: 'Admin > Workforce Management > Intraday Monitoring', keywords: ['intraday management', 'intraday monitoring', 'workforce', 'wfm'] },
            { category: 'Performance Management', level2: 'Real-Time Adherence', level3: null, legacy: 'Admin > Workforce Management > Real-Time Adherence', keywords: ['real-time adherence', 'rta'] },
            { category: 'Performance Management', level2: 'Employee Engagement', level3: 'Development and Feedback', legacy: 'Admin > Performance & Engagement > Development and Feedback', keywords: ['development and feedback', 'employee engagement', 'dev feedback'] },
            { category: 'Performance Management', level2: 'Employee Engagement', level3: 'External Metric Definitions', legacy: 'Admin > Performance & Engagement > External Metric Definitions', keywords: ['external metric definitions'] },
            { category: 'Performance Management', level2: 'Employee Engagement', level3: 'Gamification Settings', legacy: 'Admin > Performance & Engagement > Gamification Settings', keywords: ['gamification settings'] },
            { category: 'Performance Management', level2: 'Employee Engagement', level3: 'Gamification Profiles', legacy: 'Admin > Performance & Engagement > Gamification Profiles', keywords: ['gamification profiles'] },
            { category: 'Performance Management', level2: 'Employee Engagement', level3: 'Gamification Contests', legacy: 'Admin > Performance & Engagement > Gamification Contests', keywords: ['gamification contests'] },
            { category: 'Contacts', level2: 'External Contacts and Organizations', level3: null, legacy: 'Directory > External Contacts', keywords: ['external contacts', 'organizations', 'directory'] },
            { category: 'Contacts', level2: 'Identity Resolution', level3: null, legacy: 'Directory > External Contacts', keywords: ['identity resolution'] },
            { category: 'Contacts', level2: 'Custom Fields', level3: null, legacy: 'Directory > External Contacts', keywords: ['custom fields'] },
            { category: 'Contacts', level2: 'External Sources', level3: null, legacy: 'Directory > External Contacts', keywords: ['external sources'] },
            { category: 'Analytics', level2: 'Analytics Workspace', level3: null, legacy: 'Performance > Workspace', keywords: ['analytics workspace', 'performance'] },
            { category: 'Analytics', level2: 'Analytics Settings', level3: null, legacy: 'Admin > Contact Center > Analytics', keywords: ['analytics settings'] },
            { category: 'Journey Management', level2: null, level3: null, legacy: 'Admin > Journey Management', keywords: ['journey management'] },
            { category: 'Orchestration', level2: 'Architect', level3: null, legacy: 'Admin > Architect > Architect', keywords: ['architect'] },
            { category: 'Orchestration', level2: 'Orchestration Assets', level3: 'Data Tables', legacy: 'Admin > Architect > Data Tables', keywords: ['data tables'] },
            { category: 'Orchestration', level2: 'Orchestration Assets', level3: 'Flow Outcomes', legacy: 'Admin > Architect > Flow Outcomes', keywords: ['flow outcomes'] },
            { category: 'Orchestration', level2: 'Orchestration Assets', level3: 'Flow Milestones', legacy: 'Admin > Architect > Flow Milestones', keywords: ['flow milestones'] },
            { category: 'Orchestration', level2: 'Orchestration Assets', level3: 'Conversation Schemas', legacy: null, keywords: ['conversation schemas'] },
            { category: 'Orchestration', level2: 'AI Studio', level3: 'Guides', legacy: 'Admin > AI Studio > Guides', keywords: ['ai studio guides'] },
            { category: 'Orchestration', level2: 'AI Studio', level3: 'Summaries', legacy: 'Admin > AI Studio > Summaries', keywords: ['ai studio summaries'] },
            { category: 'Orchestration', level2: 'AI Studio', level3: 'Agent Copilots', legacy: 'Admin > AI Studio', keywords: ['agent copilots'] },
            { category: 'Orchestration', level2: 'Enrichments', level3: 'Customer Segments', legacy: 'Admin > Predictive Engagement > Segments', keywords: ['customer segments', 'predictive engagement'] },
            { category: 'Orchestration', level2: 'Enrichments', level3: 'Outcomes', legacy: 'Admin > Predictive Engagement > Outcomes', keywords: ['outcomes'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Live Now', legacy: 'Admin > Predictive Engagement > Live Now', keywords: ['live now'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Action Maps', legacy: 'Admin > Predictive Engagement > Action Maps', keywords: ['action maps'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Action Library', legacy: 'Admin > Predictive Engagement > Action Library', keywords: ['action library'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Predictive Engagement Settings', legacy: 'Admin > Predictive Engagement > Predictive Engagement Settings', keywords: ['predictive engagement settings'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Visitor Activity Report', legacy: 'Admin > Predictive Engagement > Visitor Activity Report', keywords: ['visitor activity report'] },
            { category: 'Orchestration', level2: 'Predictive Engagement', level3: 'Action Map Report', legacy: 'Admin > Predictive Engagement > Action Map Report', keywords: ['action map report'] },
            { category: 'Orchestration', level2: 'Routing', level3: 'Call Routing', legacy: 'Admin > Routing > Call Routing', keywords: ['call routing'] },
            { category: 'Orchestration', level2: 'Routing', level3: 'Emergency Groups', legacy: 'Admin > Routing > Emergency Groups', keywords: ['emergency groups'] },
            { category: 'Orchestration', level2: 'Routing', level3: 'Message Routing', legacy: 'Admin > Routing > Message Routing', keywords: ['message routing'] },
            { category: 'Orchestration', level2: 'Routing', level3: 'Operating Schedules', legacy: 'Admin > Routing > Operating Schedules', keywords: ['operating schedules'] },
            { category: 'Orchestration', level2: 'Routing', level3: 'Operating Schedule Groups', legacy: 'Admin > Routing > Operating Schedule Groups', keywords: ['operating schedule groups'] },
            { category: 'Orchestration', level2: 'Rule-Based Decisions', level3: 'Rule Schemas', legacy: 'Admin > Work Automation > Rule Schemas', keywords: ['rule schemas', 'work automation'] },
            { category: 'Orchestration', level2: 'Rule-Based Decisions', level3: 'Decision Tables', legacy: 'Admin > Work Automation > Decision Tables', keywords: ['decision tables'] },
            { category: 'Orchestration', level2: 'Work Automation', level3: 'Workbins', legacy: 'Admin > Work Automation > Workbins', keywords: ['workbins'] },
            { category: 'Orchestration', level2: 'Work Automation', level3: 'Custom Attributes', legacy: 'Admin > Work Automation > Custom Attributes', keywords: ['custom attributes'] },
            { category: 'Orchestration', level2: 'Work Automation', level3: 'Worktypes', legacy: 'Admin > Work Automation > Worktypes', keywords: ['worktypes'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Messenger Configurations', legacy: 'Admin > Message > Messenger Configurations', keywords: ['messenger configurations'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Messenger Deployments', legacy: 'Admin > Message > Messenger Deployments', keywords: ['messenger deployments'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Platform Configurations', legacy: 'Admin > Message > Platform Configs', keywords: ['platform configurations', 'platform configs'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Platform Integrations', legacy: 'Admin > Message > Platforms', keywords: ['platform integrations'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Supported Content Profiles', legacy: 'Admin > Message > Supported Content Profiles', keywords: ['supported content profiles'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'SMS Number Inventory', legacy: 'Admin > Message > SMS Number Inventory', keywords: ['sms number inventory'] },
            { category: 'Digital and Telephony', level2: 'Message', level3: 'Threading Timeline', legacy: 'Admin > Message > Threading Timeline', keywords: ['threading timeline'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Campaign Management', legacy: 'Admin > Outbound > Campaign Management', keywords: ['campaign management', 'campaigns'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Call Analysis Responses', legacy: 'Admin > Outbound > Call Analysis Responses', keywords: ['call analysis responses'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Contactable Time Sets', legacy: 'Admin > Outbound > Contactable Time Sets', keywords: ['contactable time sets'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Event Viewer', legacy: 'Admin > Outbound > Event Viewer', keywords: ['event viewer'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'List Management', legacy: 'Admin > Outbound > List Management', keywords: ['list management'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Rule Management', legacy: 'Admin > Outbound > Rule Management', keywords: ['rule management'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Outbound Settings', legacy: 'Admin > Outbound > Outbound Settings', keywords: ['outbound settings'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Outbound Campaigns', legacy: 'Admin > Outbound > Outbound Campaigns', keywords: ['outbound campaigns'] },
            { category: 'Digital and Telephony', level2: 'Outbound', level3: 'Wrap-up Code Mappings', legacy: 'Admin > Outbound > Wrap-up Code Mappings', keywords: ['wrap-up code mappings'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Topology', legacy: 'Admin > Telephony > Topology', keywords: ['topology'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Metrics', legacy: 'Admin > Telephony > Metrics', keywords: ['telephony metrics'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Trunks', legacy: 'Admin > Telephony > External Trunks and Phone Trunks', keywords: ['trunks', 'phone trunks'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Sites', legacy: 'Admin > Telephony > Sites', keywords: ['sites'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Edges', legacy: 'Admin > Telephony > Edges', keywords: ['edges'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Edge Groups', legacy: 'Admin > Telephony > Edge Groups', keywords: ['edge groups'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Extensions', legacy: 'Admin > Telephony > Extension Assignments, Extension Pools', keywords: ['extensions', 'extension pools'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'DID Numbers', legacy: 'Admin > Telephony > DID Numbers', keywords: ['did numbers'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Phone Management', legacy: 'Admin > Telephony > Phones and Base Settings', keywords: ['phone management'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Number Management', legacy: 'Admin > Genesys Cloud Voice > Number Management', keywords: ['number management'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Certificate Authorities', legacy: 'Admin > Telephony > Certificate Authorities', keywords: ['certificate authorities'] },
            { category: 'Digital and Telephony', level2: 'Telephony', level3: 'Global Telephony Settings', legacy: 'Admin > Telephony > Global Telephony Settings', keywords: ['global telephony settings'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Assistants', legacy: 'Admin > Contact Center > Assistants', keywords: ['assistants'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Utilization', legacy: 'Admin > Contact Center > Utilization', keywords: ['utilization'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Wrap-up Codes', legacy: 'Admin > Contact Center > Wrap-up Codes', keywords: ['wrap-up codes', 'wrap up'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Custom KPIs', legacy: 'Admin > Custom APIs', keywords: ['custom kpis', 'custom apis'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Canned Responses', legacy: 'Admin > Contact Center > Canned Responses', keywords: ['canned responses'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Response Assets', legacy: 'Admin > Contact Center > Response Assets', keywords: ['response assets'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Panel Manager', legacy: 'Admin > Contact Center > Panel Manager', keywords: ['panel manager'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Scripts', legacy: 'Admin > Contact Center > Scripts', keywords: ['scripts'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Script Templates', legacy: 'Admin > Contact Center > Script Templates', keywords: ['script templates'] },
            { category: 'Digital and Telephony', level2: 'Interaction Assets', level3: 'Widgets', legacy: 'Admin > Widgets', keywords: ['widgets'] },
            { category: 'Digital and Telephony', level2: 'Email', level3: null, legacy: 'Admin > Contact Center > Email', keywords: ['email'] },
            { category: 'Conversational Intelligence', level2: 'Recording and Policies', level3: 'Encryption Keys', legacy: 'Admin > Quality > Encryption Keys', keywords: ['encryption keys', 'quality'] },
            { category: 'Conversational Intelligence', level2: 'Recording and Policies', level3: 'Policies', legacy: 'Admin > Quality > Policies', keywords: ['policies'] },
            { category: 'Conversational Intelligence', level2: 'Recording and Policies', level3: 'Recording Management', legacy: 'Admin > Quality > Recording Management', keywords: ['recording management'] },
            { category: 'Conversational Intelligence', level2: 'Quality Management', level3: 'Evaluation Forms', legacy: 'Admin > Quality > Evaluation Forms', keywords: ['evaluation forms', 'eval form', 'evals'] },
            { category: 'Conversational Intelligence', level2: 'Quality Management', level3: 'Customer Surveys', legacy: 'Admin > Quality > Survey Forms', keywords: ['customer surveys', 'surveys'] },
            { category: 'Conversational Intelligence', level2: 'Quality Management', level3: 'Evaluators', legacy: 'Admin > Quality > Evaluators', keywords: ['evaluators'] },
            { category: 'Conversational Intelligence', level2: 'Quality Management', level3: 'Agent Evaluations', legacy: 'Admin > Quality > Agent Evaluations', keywords: ['agent evaluations'] },
            { category: 'Conversational Intelligence', level2: 'Quality Management', level3: 'Calibration Evaluations', legacy: 'Admin > Quality > Calibration Evaluations', keywords: ['calibration evaluations'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Speech and Text Configuration', legacy: 'Admin > Quality > Speech and Text Analytics', keywords: ['speech and text analytics', 'configuration'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Dictionary Management', legacy: 'Admin > Quality > Dictionary Management', keywords: ['dictionary management'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Topics', legacy: 'Admin > Quality > Topics', keywords: ['topics'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Topic Miner', legacy: 'Admin > Quality > Topic Miner', keywords: ['topic miner'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Programs', legacy: 'Admin > Quality > Programs', keywords: ['programs'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Interaction Categories', legacy: 'Admin > Quality > Interaction Categories', keywords: ['interaction categories'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Interaction Reprocessing', legacy: null, keywords: ['interaction reprocessing'] },
            { category: 'Conversational Intelligence', level2: 'Speech and Text Analytics', level3: 'Sentiment Feedback', legacy: 'Admin > Quality > Sentiment Feedback', keywords: ['sentiment feedback'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Business Units', legacy: 'Admin > Workforce Management > Business Units', keywords: ['business units', 'wfm'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Management Units', legacy: 'Admin > Workforce Management > Management Units', keywords: ['management units', 'wfm'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Service Goal Templates', legacy: 'Admin > Workforce Management > Service Goal Templates', keywords: ['service goal templates', 'wfm'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Planning Groups', legacy: 'Admin > Workforce Management > Planning Groups', keywords: ['planning groups', 'wfm'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Staffing Groups', legacy: 'Admin > Workforce Management > Staffing Groups', keywords: ['staffing groups', 'wfm'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Agents', legacy: 'Admin > Workforce Management > Agents', keywords: ['wfm agents'] },
            { category: 'Workforce Management', level2: 'Workforce Management Configuration', level3: 'Activity Codes', legacy: 'Admin > Workforce Management > Activity Codes', keywords: ['activity codes', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Schedules', legacy: 'Admin > Workforce Management > Schedules', keywords: ['schedules', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Activity Plans', legacy: 'Admin > Workforce Management > Activity Plans', keywords: ['activity plans', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Shift Trades', legacy: 'Admin > Workforce Management > Shift Trades', keywords: ['shift trades', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Time-Off Limits', legacy: 'Admin > Workforce Management Time-Off Limits', keywords: ['time-off limits', 'time off', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Time-Off Plans', legacy: 'Admin > Workforce Management > Time-Off Plans', keywords: ['time-off plans', 'time off', 'wfm'] },
            { category: 'Workforce Management', level2: 'Scheduling', level3: 'Time-Off Requests', legacy: 'Admin > Workforce Management > Time-Off Requests', keywords: ['time-off requests', 'time off', 'wfm'] },
            { category: 'Workforce Management', level2: 'Forecasting', level3: 'Main Forecast', legacy: 'Admin > Workforce Management Main Forecast', keywords: ['main forecast', 'wfm'] },
            { category: 'Workforce Management', level2: 'Forecasting', level3: 'Forecasts', legacy: 'Admin > Workforce Management Forecast', keywords: ['forecasts', 'wfm'] },
            { category: 'Workforce Management', level2: 'Forecasting', level3: 'Historical Data Import', legacy: 'Admin > Workforce Management Forecasts', keywords: ['historical data import', 'wfm'] },
            { category: 'Workforce Management', level2: 'Capacity Planning', level3: 'Staffing Requirements', legacy: 'Admin > Workforce Management > Staffing Requirements', keywords: ['staffing requirements', 'wfm'] },
            { category: 'Workforce Management', level2: 'Capacity Planning', level3: 'Capacity Plans', legacy: 'Admin > Workforce Management > Capacity Planning', keywords: ['capacity plans', 'wfm'] },
            { category: 'Workforce Management', level2: 'Work Plan Configuration', level3: 'Work Plans', legacy: 'Admin > Workforce Management > Work Plan Configuration', keywords: ['work plans', 'wfm'] },
            { category: 'Workforce Management', level2: 'Work Plan Configuration', level3: 'Work Plan Rotations', legacy: 'Admin > Workforce Management > Work Plan Rotations', keywords: ['work plan rotations', 'wfm'] },
            { category: 'Workforce Management', level2: 'Work Plan Configuration', level3: 'Work Plan Assignments', legacy: 'Admin > Workforce Management > Work Plan Assignments', keywords: ['work plan assignments', 'wfm'] },
            { category: 'Workforce Management', level2: 'Work Plan Configuration', level3: 'Work Plan Bids', legacy: 'Admin > Workforce Management > Work Plan Bids', keywords: ['work plan bids', 'wfm'] },
            { category: 'Workforce Management', level2: 'Historical Reporting', level3: 'Historical Shrinkage', legacy: 'Admin > Workforce Management > Historical Shrinkage', keywords: ['historical shrinkage', 'wfm'] },
            { category: 'Knowledge', level2: 'Articles', level3: null, legacy: 'Admin > Knowledge > Articles', keywords: ['knowledge articles'] },
            { category: 'Knowledge', level2: 'Categories and Labels', level3: null, legacy: 'Admin > Knowledge > Categories & Labels', keywords: ['knowledge categories', 'labels'] },
            { category: 'Knowledge', level2: 'Sources', level3: null, legacy: 'Admin > Knowledge > Sources', keywords: ['knowledge sources'] },
            { category: 'Knowledge', level2: 'Optimizer', level3: null, legacy: 'Admin > Knowledge > Optimizer', keywords: ['knowledge optimizer'] },
            { category: 'User Management', level2: 'Users', level3: null, legacy: 'Admin > People & Permissions > People', keywords: ['users', 'people'] },
            { category: 'User Management', level2: 'Roles and Permissions', level3: null, legacy: 'Admin > People & Permissions > Roles / Permissions', keywords: ['roles', 'permissions'] },
            { category: 'User Management', level2: 'Queues', level3: null, legacy: 'Admin > Contact Center > Queues', keywords: ['queues'] },
            { category: 'User Management', level2: 'Access Policies', level3: null, legacy: 'Admin > Contact Center > Access Policies', keywords: ['access policies'] },
            { category: 'User Management', level2: 'ACD Skills and Languages', level3: null, legacy: 'Admin > People & Permissions > ACD Skills & Languages', keywords: ['acd skills', 'languages'] },
            { category: 'User Management', level2: 'Authorized Organizations', level3: null, legacy: 'Admin > People & Permissions > Authorized Organizations', keywords: ['authorized organizations'] },
            { category: 'User Management', level2: 'Divisions', level3: null, legacy: 'Admin > People & Permissions > Divisions', keywords: ['divisions'] },
            { category: 'User Management', level2: 'Groups', level3: null, legacy: 'Admin > Directory > Groups', keywords: ['groups'] },
            { category: 'User Management', level2: 'Locations', level3: null, legacy: 'Admin > Directory > Locations', keywords: ['locations'] },
            { category: 'User Management', level2: 'Profile Fields', level3: null, legacy: 'Admin > Directory > Profile Fields', keywords: ['profile fields'] },
            { category: 'User Management', level2: 'User Directory', level3: null, legacy: 'Admin > Directory', keywords: ['user directory'] },
            { category: 'User Management', level2: 'Work Teams', level3: null, legacy: 'Admin > Work Teams', keywords: ['work teams'] },
            { category: 'IT and Integrations', level2: 'API Usage', level3: null, legacy: 'Admin > Platform Usage > API Usage', keywords: ['api usage'] },
            { category: 'IT and Integrations', level2: 'Audit Viewer', level3: null, legacy: 'Admin > Troubleshooting > Audit Viewer', keywords: ['audit viewer'] },
            { category: 'IT and Integrations', level2: 'Authorized Applications', level3: null, legacy: 'Admin > Integrations > Authorized Applications', keywords: ['authorized applications'] },
            { category: 'IT and Integrations', level2: 'Disconnect Interactions', level3: null, legacy: 'Admin > Routing > Disconnect Interactions', keywords: ['disconnect interactions'] },
            { category: 'IT and Integrations', level2: 'Documents', level3: null, legacy: 'Documents menu', keywords: ['documents'] },
            { category: 'IT and Integrations', level2: 'Integrations', level3: null, legacy: 'Admin > Integrations > Integrations', keywords: ['integrations'] },
            { category: 'IT and Integrations', level2: 'Data Actions', level3: null, legacy: 'Admin > Integrations > Actions', keywords: ['data actions'] },
            { category: 'IT and Integrations', level2: 'Log Capture', level3: null, legacy: 'Admin > Troubleshooting > Log Capture', keywords: ['log capture'] },
            { category: 'IT and Integrations', level2: 'OAuth', level3: null, legacy: 'Admin > Integrations > OAuth', keywords: ['oauth'] },
            { category: 'IT and Integrations', level2: 'Operational Console', level3: null, legacy: 'Admin > Troubleshooting > Operational Console', keywords: ['operational console'] },
            { category: 'IT and Integrations', level2: 'Single Sign-on', level3: null, legacy: 'Admin > Integrations > Single Sign-On', keywords: ['single sign-on', 'sso'] },
            { category: 'Account', level2: 'Digital Filtering Rules', level3: null, legacy: 'Admin > Account Settings > Digital Data Filtering Rules', keywords: ['digital filtering rules', 'data filtering'] },
            { category: 'Account', level2: 'Subscription', level3: null, legacy: 'Admin > Account Settings > Subscription', keywords: ['subscription'] },
            { category: 'Account', level2: 'Organization Settings', level3: null, legacy: 'Admin > Account Settings > Organization Settings', keywords: ['organization settings'] },
            { category: 'Account', level2: 'Usage', level3: null, legacy: 'Admin > Account Settings > Usage', keywords: ['usage'] },
            { category: 'Account', level2: 'Genesys AppFoundry', level3: null, legacy: 'Admin > Account Settings > Genesys AppFoundry', keywords: ['genesys appfoundry', 'appfoundry'] }
        ];

        // --- DOM ELEMENTS ---
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const typingIndicator = document.getElementById('typing-indicator');

        // --- EVENT LISTENERS ---
        sendBtn.addEventListener('click', handleUserMessage);
        userInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                handleUserMessage();
            }
        });

        // --- FUNCTIONS ---

        /**
         * Handles the entire process of receiving a user message and generating a response.
         */
        function handleUserMessage() {
            const message = userInput.value.trim();
            if (message === '') return;

            appendMessage(message, 'user');
            userInput.value = '';
            
            showTypingIndicator();

            // Simulate bot thinking time for a better user experience
            setTimeout(() => {
                const response = generateBotResponse(message);
                hideTypingIndicator();
                appendMessage(response, 'bot');
            }, 1000 + Math.random() * 500);
        }

        /**
         * Appends a message to the chat window.
         * @param {string} message - The message content.
         * @param {string} sender - 'user' or 'bot'.
         */
        function appendMessage(message, sender) {
            const messageWrapper = document.createElement('div');
            const messageBubble = document.createElement('div');
            const messageContent = document.createElement('p');

            messageWrapper.classList.add('flex', 'mb-4');
            messageBubble.classList.add('p-3', 'rounded-lg', 'shadow');
            messageContent.classList.add('text-sm');
            messageContent.innerHTML = message; // Using innerHTML to render formatted code tags

            if (sender === 'user') {
                messageWrapper.classList.add('justify-end');
                messageBubble.classList.add('bg-blue-600', 'text-white');
                messageBubble.style.maxWidth = '80%';
            } else {
                messageWrapper.classList.add('justify-start');
                messageBubble.classList.add('bg-gray-200', 'text-gray-800');
                messageBubble.style.maxWidth = '80%';
            }

            messageBubble.appendChild(messageContent);
            messageWrapper.appendChild(messageBubble);
            chatWindow.appendChild(messageWrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight; // Auto-scroll to the bottom
        }

        /**
         * Generates a response from the bot based on the user's query.
         * @param {string} query - The user's input message.
         * @returns {string} The bot's response.
         */
        function generateBotResponse(query) {
            const queryWords = query.toLowerCase().split(/\s+/).filter(w => w.length > 1);
            let matches = [];

            if (queryWords.length === 0) {
                return "Please enter a more specific search term.";
            }

            navigationData.forEach(item => {
                let score = 0;
                
                const searchableText = [
                    item.category,
                    item.level2,
                    item.level3,
                    item.legacy,
                    ...item.keywords
                ].filter(Boolean).join(' ').toLowerCase();
                
                const searchableWords = new Set(searchableText.replace(/[>]/g, ' ').split(/\s+/));

                // Primary scoring: each query word that matches the start of a searchable word gets a point.
                queryWords.forEach(qWord => {
                    for (const sWord of searchableWords) {
                        if (sWord.startsWith(qWord)) {
                            score++;
                            break; // one point per query word, then move to the next query word
                        }
                    }
                });
                
                // Bonus scoring: if the entire query is found, give a big boost.
                // This helps prioritize direct matches.
                if (searchableText.includes(query.toLowerCase())) {
                    score += 5;
                }

                if (score > 0) {
                    matches.push({ item, score });
                }
            });

            if (matches.length === 0) {
                return "I'm sorry, I couldn't find a navigation path related to your search. Could you try rephrasing your question?";
            }

            // Sort by score descending to find the best match
            matches.sort((a, b) => b.score - a.score);
            
            const bestMatch = matches[0].item;
            
            return formatResponse(bestMatch);
        }


        /**
         * Formats a matched navigation item into a user-friendly response.
         * @param {object} item - The navigation data object.
         * @returns {string} The formatted response string.
         */
        function formatResponse(item) {
            let path = `<strong>${item.category}</strong>`;
            if (item.level2) path += ` > <strong>${item.level2}</strong>`;
            if (item.level3) path += ` > <strong>${item.level3}</strong>`;

            if (item.legacy) {
                 return `You can find that here:<br><code class="bg-gray-800 text-white text-xs p-2 rounded-md block mt-2 whitespace-normal">${path}</code><br>This replaces the old path: <em>${item.legacy}</em>.`;
            } else {
                 return `You can find that here:<br><code class="bg-gray-800 text-white text-xs p-2 rounded-md block mt-2 whitespace-normal">${path}</code>`;
            }
        }

        /**
         * Shows the typing indicator.
         */
        function showTypingIndicator() {
            typingIndicator.classList.remove('hidden');
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        /**
         * Hides the typing indicator.
         */
        function hideTypingIndicator() {
            typingIndicator.classList.add('hidden');
        }

    </script>
</body>
</html>